

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar_round.png">
  <link rel="icon" href="/img/avatar_round.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Taoran">
  <meta name="keywords" content="">
  
    <meta name="description" content="Written Ahead | 写在前面The project presented in this article is to deploy an errata of your own in a Hexo environment. The code is based on a Github Gist implementation for static blog pages without a b">
<meta property="og:type" content="article">
<meta property="og:title" content="Open Source Project - Blog Errata | 开源项目 - 勘误表">
<meta property="og:url" content="https://algo-x.cn/articles/Blog-Errata/index.html">
<meta property="og:site_name" content="Algo-X.cn">
<meta property="og:description" content="Written Ahead | 写在前面The project presented in this article is to deploy an errata of your own in a Hexo environment. The code is based on a Github Gist implementation for static blog pages without a b">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-08-22T13:01:50.000Z">
<meta property="article:modified_time" content="2024-08-23T13:06:23.656Z">
<meta property="article:author" content="Taoran">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Open Source Project - Blog Errata | 开源项目 - 勘误表 - Algo-X.cn</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"algo-x.cn","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":75,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"#"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Algo-X.cn</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/articles/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>文章</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/errata/" target="_self">
                <i class="iconfont icon-bug"></i>
                <span>勘误表</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/chemistry/" target="_self">
                <i class="iconfont icon-exp-fill"></i>
                <span>化学</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/background.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Open Source Project - Blog Errata | 开源项目 - 勘误表"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-08-22 21:01" pubdate>
          2024年8月22日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          27 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Open Source Project - Blog Errata | 开源项目 - 勘误表</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    本文最后更新于 2024年8月23日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <hr>
<h3 id="Written-Ahead-写在前面"><a href="#Written-Ahead-写在前面" class="headerlink" title="Written Ahead | 写在前面"></a>Written Ahead | 写在前面</h3><p>The project presented in this article is to deploy an errata of your own in a Hexo environment. The code is based on a <strong>Github Gist</strong> implementation for static blog pages without a backend. Although this approach is easy to implement, <strong>please do not use this approach if possible</strong>. It is highly recommended that developers who are able to do so look for <strong>open text databases</strong> on their own, or implement this feature <strong>on a backend</strong>.</p>
<p>本文所介绍的项目是在 Hexo 环境中部署一个自己的勘误表。代码基于 <strong>Github Gist</strong> 实现，适用于没有后端的静态博客页面。虽然这种方式易于实现，但是<strong>请尽可能不使用这种方式</strong>。强烈建议有能力的开发者自行寻找<strong>开放的文本数据库</strong>，或<strong>在后端上实现</strong>这个功能。</p>
<p>好啦，自己人就多说几句。</p>
<p>这个项目是我自己开发的，翻译成英文只是为了让更多人看懂。<br>还是费了很大功夫的，自己也都看过一遍了，请放心食用。</p>
<p>自己学的 <code>HTML</code> 和 <code>Javascript</code>，码风奇丑，请见谅。<br>这个实现方式，我自己看了都过意不去，都对不起 Github。有能力部署服务器的还是尽可能部署一个，说实话，整多了也不好。</p>
<hr>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>This is a blog errata open source project. You can create an errata page in your blog for academic sharing and communication. There are great security risks, so it is not uploaded to Github.</p>
<p>Here’s an <a href="../../errata">example</a>.</p>
<hr>
<h3 id="Implementation-Principle"><a href="#Implementation-Principle" class="headerlink" title="Implementation Principle"></a>Implementation Principle</h3><p>This errata is based on the Github Gist. The errata are read and updated by a single user who can fetch and change the Gist.</p>
<hr>
<h3 id="Preliminary-Preparations"><a href="#Preliminary-Preparations" class="headerlink" title="Preliminary Preparations"></a>Preliminary Preparations</h3><ol>
<li>Create a Github user. Its Token will be exposed, so a new registration is recommended. You are responsible for this account.</li>
<li>Create a Gist using this Github user.</li>
</ol>
<hr>
<h3 id="Create-Page"><a href="#Create-Page" class="headerlink" title="Create Page"></a>Create Page</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new page errata<br></code></pre></td></tr></table></figure>
<p>In this way, your errata will be implemented on the page <code>/errata</code>.</p>
<h3 id="Deploying-Frontend-JavaScript"><a href="#Deploying-Frontend-JavaScript" class="headerlink" title="Deploying Frontend JavaScript"></a>Deploying Frontend JavaScript</h3><p>Create new folders <code>js</code> and file <code>source/js/ex-func-errata.js</code> in the <code>/source</code> directory and write the following code in the file:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createXHR</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">XHR</span>=[<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Msxml2.XMLHTTP&quot;</span>);&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Msxml3.XMLHTTP&quot;</span>);&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>);&#125;<br>	];<br>	<span class="hljs-keyword">var</span> xhr=<span class="hljs-literal">null</span>;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-variable constant_">XHR</span>.<span class="hljs-property">length</span>; ++i) &#123;<br>		<span class="hljs-keyword">try</span> &#123;xhr=<span class="hljs-variable constant_">XHR</span>[i]();&#125; <span class="hljs-keyword">catch</span>(e) &#123;<span class="hljs-keyword">continue</span>;&#125;<br>		<span class="hljs-keyword">break</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> xhr;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">addToEachLine</span>(<span class="hljs-params">inputString, insertString</span>) &#123;<br>    <span class="hljs-keyword">const</span> lines=inputString.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>    <span class="hljs-keyword">const</span> modifiedLines=lines.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> insertString + line);<br>    <span class="hljs-keyword">const</span> resultString=modifiedLines.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>    <span class="hljs-keyword">return</span> resultString;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>The function <code>createXHR()</code> is used to return an <code>XMLHttpRequest</code> instance, while <code>addToEachLine()</code> inserts the <code>insertString</code> at the beginning of each line in <code>inputString</code>.</p>
<p>These codes are placed in a separate file, which means you can avoid rewriting them when using them in other projects. Of course, you can also combine them into the following file.</p>
<p>Next, create the file <code>source/js/ex-func-errata.js</code> and write the following code in it:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> gistId=<span class="hljs-string">&#x27;Your Github Gist ID&#x27;</span>;<br><span class="hljs-keyword">var</span> accessToken;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getAccessToken</span>(<span class="hljs-params"></span>) &#123;<br>	xhr=<span class="hljs-title function_">createXHR</span>();<br>	xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;Your Token Link&#x27;</span>, <span class="hljs-literal">true</span>);<br>	xhr.<span class="hljs-property">onload</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) &#123;<br>			accessToken=xhr.<span class="hljs-property">responseText</span>;<br>		&#125; <span class="hljs-keyword">else</span> &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token Request Failed.&#x27;</span>);<br>		&#125;<br>	&#125;;<br>	xhr.<span class="hljs-property">onerror</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token Request Failed.&#x27;</span>);<br>	&#125;;<br>	xhr.<span class="hljs-title function_">send</span>();<br>&#125;<br><span class="hljs-title function_">getAccessToken</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readSubmitter</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;submitterInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readLink</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;linkInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readText</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;textInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getErrata</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">const</span> url=<span class="hljs-string">`https://api.github.com/gists/<span class="hljs-subst">$&#123;gistId&#125;</span>`</span>;<br>	<span class="hljs-keyword">let</span> res;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response=<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, &#123;<br>			<span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>			<span class="hljs-attr">headers</span>: &#123;<br>				<span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`token <span class="hljs-subst">$&#123;accessToken&#125;</span>`</span>,<br>				<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span><br>			&#125;<br>		&#125;);<br>		<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Status:&#x27;</span>, response.<span class="hljs-property">status</span>);<br>			res=<span class="hljs-string">&#x27;ERR: Request Failed.&#x27;</span>;<br>			<span class="hljs-keyword">return</span> res;<br>		&#125;<br>		<span class="hljs-keyword">const</span> data=<span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Gist Data:&#x27;</span>, data);<br>		<span class="hljs-keyword">try</span> &#123;<br>			res=data[<span class="hljs-string">&quot;files&quot;</span>][<span class="hljs-string">&quot;Blog-Errata.txt&quot;</span>][<span class="hljs-string">&quot;content&quot;</span>];<br>		&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error.&#x27;</span>);<br>			res=<span class="hljs-string">&#x27;ERR: Database error, unable to read the errata. Please contact the blog administrator.&#x27;</span>;<br>		&#125;<br>	&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error:&#x27;</span>, e);<br>		res=<span class="hljs-string">&#x27;ERR: Request error, unable to read the errata. Please check your network connection.&#x27;</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateErrata</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">var</span> updateText=<span class="hljs-string">`Submitter: <span class="hljs-subst">$&#123;readSubmitter()&#125;</span>\nIssue Link: <span class="hljs-subst">$&#123;readLink()&#125;</span>\nIssue Content: \n<span class="hljs-subst">$&#123;addToEachLine(readText(), <span class="hljs-string">&#x27;\t&#x27;</span>)&#125;</span>\nStatus: Pending\n----------`</span>;<br>	<span class="hljs-comment">// var res=getErrata();</span><br>	<span class="hljs-keyword">var</span> res=<span class="hljs-keyword">await</span> <span class="hljs-title function_">getErrata</span>();<br>	<span class="hljs-keyword">if</span> (res.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)==<span class="hljs-string">&#x27;ERR&#x27;</span>) &#123;<br>		<span class="hljs-keyword">return</span> res;<br>	&#125;<br>	updateText=<span class="hljs-string">`<span class="hljs-subst">$&#123;res&#125;</span>\n<span class="hljs-subst">$&#123;updateText&#125;</span>`</span>;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(updateText);<br>	<span class="hljs-keyword">const</span> requestData=&#123;<br>		<span class="hljs-attr">files</span>: &#123;<br>			<span class="hljs-string">&#x27;Blog-Errata.txt&#x27;</span>: &#123;<br>				<span class="hljs-attr">content</span>: updateText<br>			&#125;<br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">const</span> url=<span class="hljs-string">`https://api.github.com/gists/<span class="hljs-subst">$&#123;gistId&#125;</span>`</span>;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response=<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, &#123;<br>			<span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;PATCH&#x27;</span>,<br>			<span class="hljs-attr">headers</span>: &#123;<br>				<span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`token <span class="hljs-subst">$&#123;accessToken&#125;</span>`</span>,<br>				<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.raw+json&#x27;</span>,<br>				<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span><br>				<span class="hljs-comment">// &#x27;Cache-Control&#x27;: &#x27;no-cache&#x27; // Blocked by CORS Policy</span><br>			&#125;,<br>			<span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(requestData)<br>		&#125;)<br>		<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Status:&#x27;</span>, response.<span class="hljs-property">status</span>);<br>		&#125;<br>		<span class="hljs-keyword">const</span> data=response.<span class="hljs-title function_">json</span>();<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Update Success:&#x27;</span>, data);<br>			res=<span class="hljs-string">&#x27;Update successful! Please refresh to see the results.&#x27;</span><br>		&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Update Error.&#x27;</span>);<br>			res=<span class="hljs-string">&#x27;Request Error: Database error, unable to read the errata. Please contact the blog administrator.&#x27;</span>;<br>		&#125;<br>	&#125; <span class="hljs-keyword">catch</span>(e) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error:&#x27;</span>, e);<br>		res=<span class="hljs-string">&#x27;Request error, unable to update the errata. Please check your network connection.&#x27;</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>To get the <code>Github Gist ID</code>, you need to open the Github Gist you created.</p>
<p>For example, here’s a Gist: <code>https://gist.github.com/Username/GistID</code><br>Its Gist ID is the string at the end: <code>GistID</code></p>
<p><code>Your Token Link</code> is a static API that returns your user Token.<br>You can use <a target="_blank" rel="noopener" href="https://www.textdb.online/">TextDB</a> to implement this feature, please refer to the API documentation for details.<br>You can choose to update this Token regularly and delete the previous ones to prevent malicious access.</p>
<p>This setup helps protect your Token and complies with Github’s deployment requirements, which do not allow other users’ Tokens to be included.</p>
<p>The code uses techniques related to asynchronous requests. The <code>async-await</code> structure is used here to handle asynchronous requests.</p>
<p>Note the following code:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> res=<span class="hljs-keyword">await</span> <span class="hljs-title function_">getErrata</span>();<br><span class="hljs-keyword">if</span> (res.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)==<span class="hljs-string">&#x27;ERR&#x27;</span>) &#123;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>When fetching the errata, if the errata cannot be retrieved, it will not be updated, and an error message will be returned.<br>Without the <code>if</code> statement, your errata might be overwritten by the error message.</p>
<p>Therefore, if you modify the error message, keep the <code>ERR</code> prefix, or alternatively, create a separate <code>flag</code> to indicate the error message.</p>
<hr>
<h3 id="Edit-Page-Markdown-File"><a href="#Edit-Page-Markdown-File" class="headerlink" title="Edit Page Markdown File"></a>Edit Page Markdown File</h3><p>The Markdown file for the new page is at <code>/source/errata/index.md</code>. Edit the following code under <code>YAML Front</code>:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/ex-func.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/ex-func-errata.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br>&lt;!-- Prevent refreshing or leaving the page. --&gt;<br>&lt;!-- <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="hljs-code">	window.addEventListener(&#x27;beforeunload&#x27;, function(e) &#123;</span><br><span class="hljs-code">		var confirmationMessage = &#x27;Refreshing or leaving the page may lose information, are you sure?&#x27;;</span><br><span class="hljs-code">		e.returnValue = confirmationMessage;</span><br><span class="hljs-code">		return confirmationMessage;</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">&lt;/script&gt; --&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span></span></span><br><span class="hljs-code">	.tip-display-area &#123;</span><br><span class="hljs-code">		padding: 5px 10px;</span><br><span class="hljs-code">		display: flex;</span><br><span class="hljs-code">		background-color: #ffefef;</span><br><span class="hljs-code">		color: black;</span><br><span class="hljs-code">		border: 1px solid #f00;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		align-items: center;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.login-button &#123;</span><br><span class="hljs-code">		background-color: #7f7f7f;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 5px 10px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		float: right;</span><br><span class="hljs-code">		margin-left: auto;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.login-button:hover &#123;</span><br><span class="hljs-code">		background-color: #5f5f5f;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.text-container &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		padding: 10px;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.link-input &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.text-input &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">		resize: none;</span><br><span class="hljs-code">		min-height: 200px;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.read-button &#123;</span><br><span class="hljs-code">		background-color: #005f9f;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 10px 20px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 5px;</span><br><span class="hljs-code">		/* float: left;</span><br><span class="hljs-code">		margin-left: auto; */</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.read-button:hover &#123;</span><br><span class="hljs-code">		background-color: #003f7f;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.submit-button &#123;</span><br><span class="hljs-code">		background-color: #4CAF50;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 10px 20px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 5px;</span><br><span class="hljs-code">		float: right;</span><br><span class="hljs-code">		margin-left: auto;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.submit-button:hover &#123;</span><br><span class="hljs-code">		background-color: #45A049;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.errata-display-area &#123;</span><br><span class="hljs-code">		padding: 10px;</span><br><span class="hljs-code">		border: 1px solid #000;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		color: black;</span><br><span class="hljs-code">		background-color: #f0f0f0;</span><br><span class="hljs-code">		white-space: pre-wrap;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">&lt;/style&gt;</span><br><span class="hljs-code"></span><br>&lt;!-- <span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;tip-display-area&quot;</span> id=<span class="hljs-string">&quot;tipDisplayArea&quot;</span>&gt;</span></span><br><span class="hljs-code">	Please log in to Github before using it.</span><br><span class="hljs-code">	&lt;button class=&quot;login-button&quot; id=&quot;loginButton&quot;&gt;Login Github&lt;/button&gt;</span><br><span class="hljs-code">&lt;/div&gt; --&gt;</span><br><span class="hljs-code"></span><br>Academic use only, please do not upload sensitive and undesirable information.<br><br>---<br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- Submitter Sintle-Line Text Box --&gt;</span><br><span class="hljs-code">	&lt;input class=&quot;link-input&quot; id=&quot;submitterInput&quot; placeholder=&quot;Edit question submitter here.&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- Link Single-Line Text Box --&gt;</span><br><span class="hljs-code">	&lt;input class=&quot;link-input&quot; id=&quot;linkInput&quot; placeholder=&quot;Edit the link to the issue page here.&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- Question Multi-Line Text Box --&gt;</span><br><span class="hljs-code">	&lt;textarea class=&quot;text-input&quot; id=&quot;textInput&quot; placeholder=&quot;Edit the content of the question here.&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;read-button&quot;</span> id=<span class="hljs-string">&quot;readButton&quot;</span>&gt;</span></span>Read Errata<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span></span> <span class="language-xml"><span class="language-javascript">&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;submit-button&quot;</span> id=<span class="hljs-string">&quot;submitButton&quot;</span>&gt;</span></span>Submit<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span></span><br><br>---<br>Errata:<br><br><span class="language-xml"><span class="language-javascript">&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;errata-display-area&quot;</span> id=<span class="hljs-string">&quot;errataDisplayArea&quot;</span>&gt;</span></span>Data pending readout.<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span></span><br><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span></span></span><br><span class="hljs-code">	document.getElementById(&#x27;readButton&#x27;).addEventListener(&#x27;click&#x27;, function() &#123;</span><br><span class="hljs-code">		(async() =&gt; &#123;</span><br><span class="hljs-code">			const res=await getErrata();</span><br><span class="hljs-code">			document.getElementById(&#x27;errataDisplayArea&#x27;).textContent=res;</span><br><span class="hljs-code">		&#125;)();</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">	document.getElementById(&#x27;submitButton&#x27;).addEventListener(&#x27;click&#x27;, function()&#123;</span><br><span class="hljs-code">		(async() =&gt; &#123;</span><br><span class="hljs-code">			const res=await updateErrata();</span><br><span class="hljs-code">			document.getElementById(&#x27;errataDisplayArea&#x27;).textContent=res;</span><br><span class="hljs-code">		&#125;)();</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">&lt;/script&gt;</span><br><span class="hljs-code"></span><br>---<br>Thank you for your contribution!<br></code></pre></td></tr></table></figure>

<p>The <code>Refresh Interface</code> and <code>Login to Github</code> code blocks are commented out. Good luck if you want to renew these features!</p>
<p>Next, run <code>hexo s</code> to debug if it succeeds, and then you can <code>deploy</code> it.</p>
<hr>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>这是一个博客勘误表开源项目。你可以在博客中建立一个勘误表页面，以进行学术分享和交流。存在极大的安全隐患，所以没有上传到 Github 上。</p>
<p><a href="../../errata">功能示例</a></p>
<hr>
<h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><p>这个勘误表是基于 Github Gist 实现的。通过一个独立用户实现 Gist 的获取与更改，以完成勘误表的读取与更新。</p>
<hr>
<h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><ol>
<li>创建一个 Github 用户。它的 Token 将会被暴露，所以建议新注册一个。你要对该账号负责。</li>
<li>使用这个 Github 用户创建一个 Gist，新建文件并命名为 <code>Blog-Errata.txt</code>。</li>
</ol>
<hr>
<h3 id="创建页面"><a href="#创建页面" class="headerlink" title="创建页面"></a>创建页面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new page errata<br></code></pre></td></tr></table></figure>
<p>这样，你的勘误表将会在页面 <code>/errata</code> 上实现。</p>
<hr>
<h3 id="部署前端-Javascript"><a href="#部署前端-Javascript" class="headerlink" title="部署前端 Javascript"></a>部署前端 Javascript</h3><p>在 <code>/source</code> 文件夹中新建文件夹 <code>js</code> 和文件 <code>source/js/ex-func-errata.js</code>，并在文件中写入以下代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createXHR</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">var</span> <span class="hljs-variable constant_">XHR</span>=[<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Msxml2.XMLHTTP&quot;</span>);&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Msxml3.XMLHTTP&quot;</span>);&#125;,<br>		<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActiveXObject</span>(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>);&#125;<br>	];<br>	<span class="hljs-keyword">var</span> xhr=<span class="hljs-literal">null</span>;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-variable constant_">XHR</span>.<span class="hljs-property">length</span>; ++i) &#123;<br>		<span class="hljs-keyword">try</span> &#123;xhr=<span class="hljs-variable constant_">XHR</span>[i]();&#125; <span class="hljs-keyword">catch</span>(e) &#123;<span class="hljs-keyword">continue</span>;&#125;<br>		<span class="hljs-keyword">break</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> xhr;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">addToEachLine</span>(<span class="hljs-params">inputString, insertString</span>) &#123;<br>    <span class="hljs-keyword">const</span> lines=inputString.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>    <span class="hljs-keyword">const</span> modifiedLines=lines.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">line</span> =&gt;</span> insertString + line);<br>    <span class="hljs-keyword">const</span> resultString=modifiedLines.<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>);<br>    <span class="hljs-keyword">return</span> resultString;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>函数 <code>createXHR()</code> 用于返回一个 <code>XMLHttpRequest</code> 实例，而函数 <code>addToEachLine()</code> 用于在 <code>inputString</code> 每一行的行首插入 <code>insertString</code>。</p>
<p>这些代码放在一个单独的文件中，这意味着你在其它项目中用到它时可以避免重写。当然，合并起来放在下面这个文件中也无妨。</p>
<p>接下来，创建文件 <code>source/js/ex-func-errata.js</code>，并在文件中写入以下代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> gistId=<span class="hljs-string">&#x27;你创建的 Github Gist ID&#x27;</span>;<br><span class="hljs-keyword">var</span> accessToken;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getAccessToken</span>(<span class="hljs-params"></span>) &#123;<br>	xhr=<span class="hljs-title function_">createXHR</span>();<br>	xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;你的 Token 链接&#x27;</span>, <span class="hljs-literal">true</span>);<br>	xhr.<span class="hljs-property">onload</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) &#123;<br>			accessToken=xhr.<span class="hljs-property">responseText</span>;<br>		&#125; <span class="hljs-keyword">else</span> &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token Request Failed.&#x27;</span>);<br>		&#125;<br>	&#125;;<br>	xhr.<span class="hljs-property">onerror</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Token Request Failed.&#x27;</span>);<br>	&#125;;<br>	xhr.<span class="hljs-title function_">send</span>();<br>&#125;<br><span class="hljs-title function_">getAccessToken</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readSubmitter</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;submitterInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readLink</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;linkInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">readText</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;textInput&#x27;</span>).<span class="hljs-property">value</span>;<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getErrata</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">const</span> url=<span class="hljs-string">`https://api.github.com/gists/<span class="hljs-subst">$&#123;gistId&#125;</span>`</span>;<br>	<span class="hljs-keyword">let</span> res;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response=<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, &#123;<br>			<span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>			<span class="hljs-attr">headers</span>: &#123;<br>				<span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`token <span class="hljs-subst">$&#123;accessToken&#125;</span>`</span>,<br>				<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.v3+json&#x27;</span><br>			&#125;<br>		&#125;);<br>		<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Status:&#x27;</span>, response.<span class="hljs-property">status</span>);<br>			res=<span class="hljs-string">&#x27;ERR: 请求失败。&#x27;</span>;<br>			<span class="hljs-keyword">return</span> res;<br>		&#125;<br>		<span class="hljs-keyword">const</span> data=<span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Gist Data:&#x27;</span>, data);<br>		<span class="hljs-keyword">try</span> &#123;<br>			res=data[<span class="hljs-string">&quot;files&quot;</span>][<span class="hljs-string">&quot;Blog-Errata.txt&quot;</span>][<span class="hljs-string">&quot;content&quot;</span>];<br>		&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error.&#x27;</span>);<br>			res=<span class="hljs-string">&#x27;ERR: 数据库错误，勘误表无法读取，请联系博客管理员。&#x27;</span>;<br>		&#125;<br>	&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error:&#x27;</span>, e);<br>		res=<span class="hljs-string">&#x27;ERR: 请求错误，勘误表无法读取，请检查网络连接。&#x27;</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateErrata</span>(<span class="hljs-params"></span>) &#123;<br>	<span class="hljs-keyword">var</span> updateText=<span class="hljs-string">`提交者: <span class="hljs-subst">$&#123;readSubmitter()&#125;</span>\n问题链接: <span class="hljs-subst">$&#123;readLink()&#125;</span>\n问题内容: \n<span class="hljs-subst">$&#123;addToEachLine(readText(), <span class="hljs-string">&#x27;\t&#x27;</span>)&#125;</span>\n状态: Pending\n----------`</span>;<br>	<span class="hljs-comment">// var res=getErrata();</span><br>	<span class="hljs-keyword">var</span> res=<span class="hljs-keyword">await</span> <span class="hljs-title function_">getErrata</span>();<br>	<span class="hljs-keyword">if</span> (res.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)==<span class="hljs-string">&#x27;ERR&#x27;</span>) &#123;<br>		<span class="hljs-keyword">return</span> res;<br>	&#125;<br>	updateText=<span class="hljs-string">`<span class="hljs-subst">$&#123;res&#125;</span>\n<span class="hljs-subst">$&#123;updateText&#125;</span>`</span>;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(updateText);<br>	<span class="hljs-keyword">const</span> requestData=&#123;<br>		<span class="hljs-attr">files</span>: &#123;<br>			<span class="hljs-string">&#x27;Blog-Errata.txt&#x27;</span>: &#123;<br>				<span class="hljs-attr">content</span>: updateText<br>			&#125;<br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">const</span> url=<span class="hljs-string">`https://api.github.com/gists/<span class="hljs-subst">$&#123;gistId&#125;</span>`</span>;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response=<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, &#123;<br>			<span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;PATCH&#x27;</span>,<br>			<span class="hljs-attr">headers</span>: &#123;<br>				<span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`token <span class="hljs-subst">$&#123;accessToken&#125;</span>`</span>,<br>				<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/vnd.github.raw+json&#x27;</span>,<br>				<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span><br>				<span class="hljs-comment">// &#x27;Cache-Control&#x27;: &#x27;no-cache&#x27; // Blocked by CORS Policy</span><br>			&#125;,<br>			<span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(requestData)<br>		&#125;)<br>		<span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Status:&#x27;</span>, response.<span class="hljs-property">status</span>);<br>		&#125;<br>		<span class="hljs-keyword">const</span> data=response.<span class="hljs-title function_">json</span>();<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Update Success:&#x27;</span>, data);<br>			res=<span class="hljs-string">&#x27;更新成功！请刷新查看结果。&#x27;</span><br>		&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>			<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Update Error.&#x27;</span>);<br>			res=<span class="hljs-string">&#x27;Request Error: 数据库错误，勘误表无法读取，请联系博客管理员。&#x27;</span>;<br>		&#125;<br>	&#125; <span class="hljs-keyword">catch</span>(e) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Request Error:&#x27;</span>, e);<br>		res=<span class="hljs-string">&#x27;请求错误，勘误表无法更新，请检查网络连接。&#x27;</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>要获取 <code>Github Gist ID</code>，你需要打开你所创建的 Github Gist。</p>
<p>打个比方，这里是一个 Gist：<code>https://gist.github.com/Username/GistID</code><br>它的 Gist ID 就是后面的字符串：<code>GistID</code></p>
<p><code>你的 Token 链接</code> 是一个静态的 API，返回值是你的用户 Token。<br>你可以使用 <a target="_blank" rel="noopener" href="https://www.textdb.online/">TextDB</a> 实现这个功能，具体请阅读 API 文档。<br>你可以选择定期更新这个 Token，并删除以前的，以防止有人图谋不轨。</p>
<p>建立这个一是防止有人偷你的 Token，二是 Github Deploy 要求不能携带其它用户的 Token。</p>
<p>代码中使用了有关异步请求的相关技术。这里使用了 <code>async-await</code> 结构来关闭异步请求。</p>
<p>需要注意的是下面这段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> res=<span class="hljs-keyword">await</span> <span class="hljs-title function_">getErrata</span>();<br><span class="hljs-keyword">if</span> (res.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>)==<span class="hljs-string">&#x27;ERR&#x27;</span>) &#123;<br>	<span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在获取勘误表时，如果勘误表无法获取，就不要更新，并返回报错信息。<br>如果没有 <code>if</code> 语句，你的勘误表可能会被报错信息覆盖。</p>
<p>所以，如果你修改了报错信息，请保留前面的 <code>ERR</code>，或者另外立一个 <code>flag</code> 表示报错信息。</p>
<hr>
<h3 id="编辑页面-Markdown-文件"><a href="#编辑页面-Markdown-文件" class="headerlink" title="编辑页面 Markdown 文件"></a>编辑页面 Markdown 文件</h3><p>新建页面的 Markdown 文件在 <code>/source/errata/index.md</code>。在 <code>YAML Front</code> 下面编辑如下代码：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/ex-func.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/ex-func-errata.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br>&lt;!-- 阻止刷新或离开页面 --&gt;<br>&lt;!-- <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br><span class="hljs-code">	window.addEventListener(&#x27;beforeunload&#x27;, function(e) &#123;</span><br><span class="hljs-code">		var confirmationMessage = &#x27;注意到刷新或离开页面可能会丢失信息，你确定吗？&#x27;;</span><br><span class="hljs-code">		e.returnValue = confirmationMessage;</span><br><span class="hljs-code">		return confirmationMessage;</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">&lt;/script&gt; --&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span></span></span></span><br><span class="hljs-code">	.tip-display-area &#123;</span><br><span class="hljs-code">		padding: 5px 10px;</span><br><span class="hljs-code">		display: flex;</span><br><span class="hljs-code">		background-color: #ffefef;</span><br><span class="hljs-code">		color: black;</span><br><span class="hljs-code">		border: 1px solid #f00;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		align-items: center;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.login-button &#123;</span><br><span class="hljs-code">		background-color: #7f7f7f;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 5px 10px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		float: right;</span><br><span class="hljs-code">		margin-left: auto;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.login-button:hover &#123;</span><br><span class="hljs-code">		background-color: #5f5f5f;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.text-container &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		padding: 10px;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.link-input &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.text-input &#123;</span><br><span class="hljs-code">		width: 100%;</span><br><span class="hljs-code">		box-sizing: border-box;</span><br><span class="hljs-code">		resize: none;</span><br><span class="hljs-code">		min-height: 200px;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.read-button &#123;</span><br><span class="hljs-code">		background-color: #005f9f;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 10px 20px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 5px;</span><br><span class="hljs-code">		/* float: left;</span><br><span class="hljs-code">		margin-left: auto; */</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.read-button:hover &#123;</span><br><span class="hljs-code">		background-color: #003f7f;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.submit-button &#123;</span><br><span class="hljs-code">		background-color: #4CAF50;</span><br><span class="hljs-code">		color: white;</span><br><span class="hljs-code">		padding: 10px 20px;</span><br><span class="hljs-code">		border: none;</span><br><span class="hljs-code">		cursor: pointer;</span><br><span class="hljs-code">		border-radius: 5px;</span><br><span class="hljs-code">		float: right;</span><br><span class="hljs-code">		margin-left: auto;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.submit-button:hover &#123;</span><br><span class="hljs-code">		background-color: #45A049;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">	.errata-display-area &#123;</span><br><span class="hljs-code">		padding: 10px;</span><br><span class="hljs-code">		border: 1px solid #000;</span><br><span class="hljs-code">		border-radius: 3px;</span><br><span class="hljs-code">		color: black;</span><br><span class="hljs-code">		background-color: #f0f0f0;</span><br><span class="hljs-code">		white-space: pre-wrap;</span><br><span class="hljs-code">	&#125;</span><br><span class="hljs-code">&lt;/style&gt;</span><br><span class="hljs-code"></span><br>&lt;!-- <span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;tip-display-area&quot;</span> id=<span class="hljs-string">&quot;tipDisplayArea&quot;</span>&gt;</span></span><br><span class="hljs-code">	在使用之前，请先登录Github。</span><br><span class="hljs-code">	&lt;button class=&quot;login-button&quot; id=&quot;loginButton&quot;&gt;登录Github&lt;/button&gt;</span><br><span class="hljs-code">&lt;/div&gt; --&gt;</span><br><span class="hljs-code"></span><br>仅限学术用途，请勿上传敏感和不良信息。<br><br>---<br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- 提交者单行文本框，直接套用linkInput了 --&gt;</span><br><span class="hljs-code">	&lt;input class=&quot;link-input&quot; id=&quot;submitterInput&quot; placeholder=&quot;在此处编辑问题提交者&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- 链接单行文本框 --&gt;</span><br><span class="hljs-code">	&lt;input class=&quot;link-input&quot; id=&quot;linkInput&quot; placeholder=&quot;在此处编辑问题页面链接&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;text-container&quot;</span>&gt;</span></span><br><span class="hljs-code">	&lt;!-- 问题多行文本框 --&gt;</span><br><span class="hljs-code">	&lt;textarea class=&quot;text-input&quot; id=&quot;textInput&quot; placeholder=&quot;在此处编辑问题内容&quot;&gt;&lt;/textarea&gt;</span><br><span class="hljs-code">&lt;/div&gt;</span><br><span class="hljs-code"></span><br><span class="language-xml"><span class="language-javascript">&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;read-button&quot;</span> id=<span class="hljs-string">&quot;readButton&quot;</span>&gt;</span></span>读取勘误表<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span></span> <span class="language-xml"><span class="language-javascript">&lt;button <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;submit-button&quot;</span> id=<span class="hljs-string">&quot;submitButton&quot;</span>&gt;</span></span>提交<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span></span><br><br>---<br>勘误表：<br><br><span class="language-xml"><span class="language-javascript">&lt;p <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;errata-display-area&quot;</span> id=<span class="hljs-string">&quot;errataDisplayArea&quot;</span>&gt;</span></span>数据待读取<span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span></span><br><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span></span></span><br><span class="hljs-code">	document.getElementById(&#x27;readButton&#x27;).addEventListener(&#x27;click&#x27;, function() &#123;</span><br><span class="hljs-code">		(async() =&gt; &#123;</span><br><span class="hljs-code">			const res=await getErrata();</span><br><span class="hljs-code">			document.getElementById(&#x27;errataDisplayArea&#x27;).textContent=res;</span><br><span class="hljs-code">		&#125;)();</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">	document.getElementById(&#x27;submitButton&#x27;).addEventListener(&#x27;click&#x27;, function()&#123;</span><br><span class="hljs-code">		(async() =&gt; &#123;</span><br><span class="hljs-code">			const res=await updateErrata();</span><br><span class="hljs-code">			document.getElementById(&#x27;errataDisplayArea&#x27;).textContent=res;</span><br><span class="hljs-code">		&#125;)();</span><br><span class="hljs-code">	&#125;);</span><br><span class="hljs-code">&lt;/script&gt;</span><br><span class="hljs-code"></span><br>---<br>谢谢你的贡献！<br></code></pre></td></tr></table></figure>

<p>注意到有 <code>刷新界面</code> 和 <code>登录 Github</code> 两处代码块被注释掉了。如果你想续写这些功能，祝你好运！</p>
<p>接下来，执行 <code>hexo s</code> 调试是否成功，没问题就可以 <code>deploy</code> 了。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%AC%94%E8%AE%B0/%E5%BC%80%E5%8F%91/" class="category-chain-item">开发</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Open Source Project - Blog Errata | 开源项目 - 勘误表</div>
      <div>https://algo-x.cn/articles/Blog-Errata/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Taoran</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年8月22日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2024年8月23日</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                    <i class="iconfont icon-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/articles/WordNet-Linux-Configuration-Guide/" title="WordNet Linux 配置指南">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">WordNet Linux 配置指南</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/articles/Solution-of-SP22382/" title="SPOJ ETFD 题解">
                        <span class="hidden-mobile">SPOJ ETFD 题解</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <body>×</body> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
